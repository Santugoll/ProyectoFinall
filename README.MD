## Punto 1
## Elevator pitch (3--5 lineas)

Una pequeÃ±a tienda necesita un sistema confiable para **gestionar su
inventario** sin errores de duplicados, precios mal ingresados ni
cantidades negativas. Nuestra app web permite **registrar, consultar,
editar y eliminar productos** con **validaciones claras** y alertas de
error (p.ej., producto duplicado). Esta pensada para el
**administrador** (gestiona el inventario) y el **empleado** (consulta
existencias) de forma **rapida y accesible** desde el navegador.

------------------------------------------------------------------------

## Usuarios/segmentos y principales casos de uso

-   **Administrador de la tienda**
    -   Registrar un producto con **nombre, categoria, precio,
        cantidad**.
    -   Editar **precio** o **cantidad** de productos existentes.
    -   Eliminar productos.
-   **Empleado**
    -   Buscar productos por **nombre** para verificar
        disponibilidad y stock.

**Reglas y criterios clave (resumen de historias de usuario):** -
**Duplicados**: si el nombre ya existe -> **HTTP 409**. - **Busqueda**:
siempre retorna **lista paginada** (puede ser vacia). - **Cantidad**:
nunca puede ser **negativa**.

------------------------------------------------------------------------

## Objetivos &  No-objetivos

**Objetivos** 1. CRUD de productos con validaciones de negocio
(duplicados, rangos validos, cantidades >= 0). 2. Busqueda/filtrado por
nombre y categoria con **paginacion**. 3. UI simple y responsiva,
enfocada en velocidad de captura y consulta. 4. API documentada
automaticamente (**Swagger UI** en FastAPI).

**No-objetivos (explicitamente fuera de alcance por ahora)** - Gestion
de usuarios/roles avanzada (mas alla de admin/empleado sin autenticacion
robusta). - Integracion con codigos de barras/lectores fisicos. -
Reportes avanzados (PDF/Excel), analitica o BI. - Integracion con
sistemas contables/ERP o facturacion. - Multi-sucursal o control de
movimientos/bitacora.

------------------------------------------------------------------------

## Metricas/KPIs de exito

-   **Exactitud de datos**: % de operaciones rechazadas por validacion
    (esperado: >= 95% de registros validos a la primera tras 1 semana de
    uso).
-   **Tiempo de operacion**: mediana de tiempo para **registrar** un
    producto (objetivo: \< 15 s) y para **buscar** uno (\< 3 s).
-   **Errores criticos**: 0 caidas en ambiente local durante sesiones de
    \> 1 hora.
-   **Cobertura funcional**: CRUD y busqueda con paginacion disponibles
    y probadas (checklist de QA >= 90% cumplida).
-   **Satisfaccion del usuario**: NPS interno de admin/empleado >= 8/10
    tras prueba piloto.

## Casos de uso (flujo minimo)

1.  **Registrar** -> Validar -> Crear -> Responder `201` con el producto.
2.  **Buscar** -> Filtros `name`, `category`, paginacion `page`, `size` ->
    Lista (puede ser vacia) y `total`.
3.  **Editar** -> Validar no negativo en cantidad -> Actualizar `price` o
    `quantity`.
4.  **Eliminar** -> Borrado por id/nombre.

## Convenciones de validacion (implementacion esperada)

-   **Nombre**: requerido, string no vacio, unico (case_insensitive
    sugerido).
-   **Categoria**: requerida, string no vacia.
-   **Precio**: numero \> 0 con hasta 2 decimales (rechazar valores no
    numericos).
-   **Cantidad**: entero >= 0 (rechazar negativos o no enteros).
-   **Codigos HTTP**:
    -   `201` creacion exitosa, `200` lectura/edicion/eliminacion
        exitosa.
    -   `400/422` validacion de esquema/valores.
    -   `409` conflicto por **nombre duplicado**.


## Must have (MVP inicial)

Registrar producto
Como administrador, quiero registrar un producto con nombre, precio y cantidad, para llevar control del inventario.

## Criterios de aceptaciÃ³n:

Si el nombre ya existe, el sistema devuelve error 409.

No se permite precio < 1 ni cantidad < 1.

El sistema responde con 201 y los datos del producto registrado.

Listar todos los productos
Como empleado, quiero listar todos los productos, para ver el inventario actual de la tienda.

Criterios de aceptaciÃ³n:

Devuelve lista completa de productos registrados.

Si no hay productos, retorna lista vacÃ­a.

El sistema responde con 200.

## Should have (valores aÃ±adidos al MVP)

Validaciones de precio y cantidad
Como administrador, quiero que el sistema valide el precio (mayor o igual a 1) y cantidad (entero â‰¥ 1), para evitar errores en el inventario.

Criterios de aceptaciÃ³n:

Valores invÃ¡lidos â†’ 422 Unprocessable Entity.

Precio y cantidad se guardan con formato correcto.

UI con alertas de error
Como usuario (admin/empleado), quiero recibir mensajes claros de error en la interfaz, para entender quÃ© corregir.

Criterios de aceptaciÃ³n:

Mensajes visibles cuando el producto ya existe (409) o cuando hay valores invÃ¡lidos (422).

Alertas visibles en pantalla sin romper el flujo de uso.

## Could have (no implementado todavÃ­a)

Editar producto (precio o cantidad).

BÃºsqueda por nombre o categorÃ­a.

Filtros avanzados de bÃºsqueda (rango de precios, stock).

Exportar inventario a CSV.

## Wonâ€™t have (fuera de alcance en esta fase)

GestiÃ³n de usuarios y roles avanzados.
Se pospone para fases futuras.

## Mapa de versiones

MVP (Semana 11)

Historias 1 y 2 (Registrar y listar productos).

Historia 3 (Validaciones crÃ­ticas).

Historia 4 (UI con alertas de error).

VersiÃ³n final (Semana 16)

CRUD completo (editar, eliminar).

BÃºsqueda y filtros avanzados.

Exportar inventario a CSV.

Mejoras de UI/UX y pruebas extendidas.

## 5) Arquitectura y decisiones tÃ©cnicas

### 5.1 Diagrama general
El sistema se compone de dos capas principales:


- **Frontend (React + Vite):**
  - SPA que consume la API mediante `fetch` o `axios`.
  - Manejo de estado con hooks (`useState`, `useEffect`).
  - Componente principal: listado y creaciÃ³n de productos.
  - ConfiguraciÃ³n de CORS mediante variable `VITE_API_URL`.

- **Backend (FastAPI):**
  - ExposiciÃ³n de endpoints REST para **Productos** y **CategorÃ­as**.
  - Validaciones con **Pydantic** (unicidad, precios y cantidades > 0).
  - Manejo de errores con respuestas controladas (422, 404, 409).
  - Persistencia en base de datos relacional (SQLite para desarrollo, PostgreSQL para producciÃ³n).

- **CORS:**
  - Habilitado en FastAPI para aceptar solicitudes desde `http://localhost:5173` (Vite).

---

### 5.2 LibrerÃ­as clave

#### Backend
- **FastAPI** â†’ framework para definir endpoints REST.
- **Pydantic** â†’ validaciÃ³n de datos (reglas de negocio).
- **SQLAlchemy** â†’ ORM para mapear entidades (Producto, CategorÃ­a).
- **Uvicorn** â†’ servidor ASGI para correr la API.
- **pytest + httpx** â†’ pruebas automÃ¡ticas de endpoints.

#### Frontend
- **React + Vite** â†’ desarrollo rÃ¡pido de SPA.
- **axios** â†’ consumo de la API (mÃ¡s cÃ³modo que `fetch`).
- **React Router (opcional)** â†’ navegaciÃ³n entre vistas.
- **TailwindCSS (opcional)** â†’ estilos rÃ¡pidos y consistentes.

---

### 5.3 Estrategia de estado en frontend
- **Estado local con hooks** (`useState`, `useEffect`).
- No se requiere Redux ni librerÃ­as externas dado el alcance del MVP.
- Ejemplo:
  - `productos` â†’ lista obtenida desde el backend.
  - `loading` y `error` â†’ control de estados al hacer fetch.

---

### 5.4 Manejo de errores
- **422 Unprocessable Entity** â†’ datos invÃ¡lidos (precio < 1, cantidad < 1).
- **404 Not Found** â†’ recurso inexistente (producto o categorÃ­a no encontrada).
- **409 Conflict** â†’ duplicados (nombre de producto o categorÃ­a ya existente).
- **200/201/204** â†’ operaciones exitosas (lectura, creaciÃ³n, eliminaciÃ³n).

Frontend:
- Mostrar mensajes claros al usuario (ej. â€œEl producto ya existeâ€ o â€œCantidad invÃ¡lidaâ€).
- Estados de **loading/error** visibles en pantalla.

---

### 5.5 Decisiones tÃ©cnicas
- **Base de datos**: se usarÃ¡ SQLite en desarrollo por simplicidad, pero se puede migrar a PostgreSQL sin cambios mayores gracias a SQLAlchemy.
- **Estructura modular**: separar backend en carpetas (`models/`, `routes/`, `core/`) para mantener orden.
- **Validaciones en backend**: se prioriza la lÃ³gica de validaciÃ³n en Pydantic para evitar datos inconsistentes en la BD.
- **UI simple pero robusta**: empezar con listado + creaciÃ³n (vertical slice) y luego expandir a ediciÃ³n/eliminaciÃ³n.
- **Pruebas mÃ­nimas**: se incluirÃ¡ al menos 1 prueba automatizada para verificar el CRUD.

---

### DIAGRAMA SPA SUBIDO AL REPOSITORIO

## SECUENCIA TIPICA
## 1. Usuario  
- Completa formulario **"Nuevo producto"** en la aplicaciÃ³n.  

## 2. React SPA  
- EnvÃ­a `POST /productos` con el body:  

{
  id_categoria,
  nombre_producto,
  precio,
  cantidad,
  fecha_creacion
}

## 3. FastAPI  
- Valida con **Pydantic**:  
  - `nombre_producto` debe ser Ãºnico â†’ responde **409** si ya existe.  
  - `precio >= 1` y `cantidad >= 1` â†’ responde **422** si falla.  
- Inserta en la base de datos vÃ­a **SQLAlchemy**.  

## 4. Base de datos  
- Devuelve **OK** con el `id` generado.  

## 5. FastAPI  
- Responde con **201 Created**.  
- Incluye cabecera `Location: /productos/{id}`.  

## 6. React SPA  
- Llama a `GET /productos?offset=0&limit=10`.  

## 7. FastAPI â†’ DB â†’ FastAPI  
- Devuelve **200 OK** con:  
  - Header: `X-Total-Count`.  
  - Body: `[ ... productos ... ]`.  

## 8. React SPA  
- Actualiza la lista y muestra mensaje de Ã©xito al usuario.  


## PUERTOS Y FLUJO DE RED
[ Navegador ] Origin: http://localhost:5173 -> [ React (Vite dev server)  5173 ]  --CORS-->  [ FastAPI (uvicorn)  8000
]  -->  [ DB ]
         

## Mini-ERD
## Categoria  
- **id (PK)**  
- **nombre***  
- descripcion  

## Producto  
- **id (PK)**  
- id_categoria (FK â†’ Categoria.id)  
- **nombre***  
- precio  
- cantidad  
- fecha_crea  

## RelaciÃ³n  
- Una **Categoria** puede tener **n Productos**.  
- Un **Producto** pertenece a **una Categoria**.  

(*) Ãºnicos

## 6) Plan del proyecto

### 6.1 Roadmap

**Semana 6 (Entregable 1 â€” MVP Alpha)**
- âœ… DefiniciÃ³n del caso (gestiÃ³n de inventario de productos).  
- âœ… DiseÃ±o del modelo de datos base (**productos** y **categorÃ­as**).  
- âœ… Primeros endpoints CRUD en FastAPI.  
- âœ… Arquitectura inicial (frontend â†” backend) documentada.  
- ğŸš§ Primer prototipo funcional del CRUD bÃ¡sico.  

---

**Semana 7â€“10**
- âœ… ImplementaciÃ³n del **CRUD completo** en backend (productos, categorÃ­as, usuarios, Ã³rdenes).  
- âœ… IncorporaciÃ³n de **autenticaciÃ³n y registro de usuarios** con JWT.  
- âœ… ProtecciÃ³n de endpoints con `Depends(get_current_user)`.  
- âœ… ImplementaciÃ³n del **Rate Limiter** (5 solicitudes/minuto por IP en `/login` y `/register`).  
- âœ… Validaciones robustas (unicidad, tipos, valores mÃ­nimos).  
- âœ… ConfiguraciÃ³n de **CORS** y variables de entorno (`.env`).  
- âœ… Frontend React funcional con formularios, tabla y alertas de error/success.  
- âœ… PaginaciÃ³n (`offset`/`limit`) y **bÃºsqueda con debounce (300 ms)**.  
- âœ… Pruebas de endpoints con `pytest` y `httpx` (nivel bÃ¡sico).  

---

**Semana 11 (Entregable 2 â€” MVP completo)**  
- âœ… Backend y frontend totalmente integrados (API consumida correctamente desde React).  
- âœ… CRUD visual de productos con ediciÃ³n (âœ), eliminaciÃ³n (ğŸ—‘) y validaciones.  
- âœ… Mejoras visuales con **CSS moderno (gradientes, sombras, bordes redondeados)**.  
- âœ… Mensajes de estado (`error`, `success`) en la interfaz.  
- âœ… Login y registro con **almacenamiento de token JWT en localStorage**.  
- âœ… DiseÃ±o responsivo y coherente con el tema general.  
**JustificaciÃ³n:**  
Estas mejoras permitieron lograr un flujo completo y seguro de trabajo:  
el usuario puede **registrarse**, **autenticarse**, **gestionar su inventario** y **crear Ã³rdenes** dentro de una interfaz unificada.  
El sistema ahora es **modular, validado y protegido**, cumpliendo con las metas del proyecto.

---

**Semana 12â€“15**
- âœ… RediseÃ±o visual completo de pantallas de **Login** y **Register**.  
- âœ… TÃ­tulo principal ğŸ›’ *Inventario de Productos* resaltado con recuadro blanco y sombra.  
- âœ… CreaciÃ³n y visualizaciÃ³n de **Ã³rdenes** (relaciÃ³n N:M entre productos y pedidos).  
- âœ… RevisiÃ³n final de **validaciones y seguridad JWT**.  
- âœ… DocumentaciÃ³n tÃ©cnica mejorada (README + Swagger).  
- âœ… Estructura del repositorio final (frontend/backend separados).  
- âš™ï¸ Ensayos de demo y ajustes finales previos a sustentaciÃ³n.  

---

**Semana 16 (Entrega final)**  
- ğŸ¬ Demo funcional completa:  
  - Registro/Login con JWT.  
  - CRUD de productos, categorÃ­as y Ã³rdenes.  
  - Validaciones, mensajes y control de errores (401, 409, 422).  
- ğŸ§© Evidencia: capturas + video corto (â‰¤ 3 min).  
- ğŸ“ Repositorio final con documentaciÃ³n y entorno reproducible.  
- ğŸ§¾ Checklist de entregable cumplido al 100 %.  
- ğŸŒŸ Proyecto preparado para sustentaciÃ³n y presentaciÃ³n final.  

---


## 6.2 Kanban En Imagen Subida al repositorio

## 7) Cambios recientes y mejoras

### ğŸ†• ActualizaciÃ³n â€” Semana 11 a 16 (VersiÃ³n Final del Proyecto)

El sistema evolucionÃ³ significativamente desde el MVP inicial, pasando de un CRUD simple a una **aplicaciÃ³n web completa con autenticaciÃ³n, seguridad y diseÃ±o profesional**.

---

### ğŸ–¥ï¸ **Frontend (React + Vite)**

- ğŸ’„ **Nuevo diseÃ±o visual**:  
  - Se mejoraron los estilos con **gradientes, sombras y bordes redondeados** para lograr una interfaz mÃ¡s moderna y atractiva.  
  - Se agregÃ³ un **recuadro blanco con sombra al tÃ­tulo principal ğŸ›’ â€œInventario de Productosâ€**, para que destaque sobre el fondo degradado.  

- ğŸ”’ **Login y Registro rediseÃ±ados**:  
  - Se centraron los formularios verticalmente con un diseÃ±o limpio y formal.  
  - Se aplicaron los mismos colores corporativos (`#2575fc` y `#6a11cb`) para mantener coherencia visual.  
  - Se aÃ±adieron mensajes dinÃ¡micos de error y Ã©xito con estilos (`.message.error`, `.message.success`).  

- ğŸ§­ **Interactividad y usabilidad**:  
  - Se implementÃ³ **bÃºsqueda en tiempo real con debounce (300 ms)** para evitar recargar el backend mientras el usuario escribe.  
  - Se aÃ±adiÃ³ **paginaciÃ³n funcional** con botones de *â€œAnteriorâ€* y *â€œSiguienteâ€* y lÃ­mite de productos por pÃ¡gina.  
  - Se mejorÃ³ el flujo de ediciÃ³n de productos con el botÃ³n (âœ) que permite modificar directamente sin recargar toda la lista.  
  - Se agregÃ³ confirmaciÃ³n visual al eliminar productos (ğŸ—‘) mediante mensajes de Ã©xito o error.  

- âš™ï¸ **IntegraciÃ³n total con el backend**:  
  - Manejo del token JWT almacenado en `localStorage`.  
  - VerificaciÃ³n automÃ¡tica del token al recargar la pÃ¡gina (`verifyToken()` en `App.jsx`).  
  - Todas las solicitudes (`GET`, `POST`, `PUT`, `DELETE`) incluyen el encabezado `Authorization: Bearer <token>`.  

- ğŸ“± **Mejoras de UX**:  
  - Componentes reutilizables, tipografÃ­a moderna (Poppins), y diseÃ±o responsivo.  
  - El sistema ahora ofrece una experiencia consistente y atractiva tanto en pantallas grandes como pequeÃ±as.  

---

### âš™ï¸ **Backend (FastAPI + SQLite)**

- ğŸ”‘ **AutenticaciÃ³n segura con JWT**:  
  - Se implementÃ³ un sistema de autenticaciÃ³n **JWT hecho a mano** (sin dependencias externas).  
  - Incluye expiraciÃ³n de token, validaciÃ³n de firma HMAC SHA256 y verificaciÃ³n de usuario.  
  - Endpoints protegidos con `Depends(get_current_user)` para operaciones CRUD y creaciÃ³n de Ã³rdenes.  

- ğŸ§  **Rate Limiter incorporado**:  
  - Previene abuso de endpoints crÃ­ticos (`/login`, `/register`) con un lÃ­mite de 5 solicitudes por minuto por IP.  
  - Al exceder el lÃ­mite, el backend responde con **HTTP 429 â€œToo many requestsâ€**.  

- ğŸ—‚ï¸ **CRUD extendido y modular**:  
  - Entidades implementadas: **usuarios**, **categorÃ­as**, **productos**, **Ã³rdenes** y **order_items** (relaciÃ³n N:M).  
  - Soporte para crear productos con `id_categoria` numÃ©rico o nombre de categorÃ­a (se crea automÃ¡ticamente si no existe).  
  - Endpoints `/orders` y `/orders/my` agregados para registrar pedidos del usuario autenticado.  

- ğŸ§© **Validaciones avanzadas**:  
  - Evita duplicados (productos, categorÃ­as, usuarios).  
  - Controla rangos vÃ¡lidos de precio y cantidad.  
  - Devuelve errores consistentes (`400`, `401`, `404`, `409`, `422`) con mensajes claros.  

- ğŸ§± **Persistencia robusta con SQLite**:  
  - Base de datos inicializada automÃ¡ticamente al ejecutar `main.py`.  
  - Tablas relacionadas con claves forÃ¡neas (`ON DELETE SET NULL` y `ON DELETE CASCADE`).  

- ğŸ§ª **Pruebas y documentaciÃ³n**:  
  - Endpoints probados con `pytest` y `httpx`.  
  - DocumentaciÃ³n generada automÃ¡ticamente en Swagger (`/docs`).  
  - CÃ³digo modular en archivos: `db.py`, `auth.py`, `models.py`, `routes.py`, `main.py`.  

---

### ğŸ¨ **Mejoras globales de experiencia y presentaciÃ³n**

- ğŸ§¾ Se aÃ±adieron **mensajes informativos y alertas visuales** en todo el flujo (creaciÃ³n, ediciÃ³n, eliminaciÃ³n).  
- ğŸ§  Se mantuvo consistencia en nombres, estilos y estructura del repositorio.  
- ğŸª„ Se eliminÃ³ cÃ³digo duplicado y se mejorÃ³ la legibilidad (nombres descriptivos, comentarios clave).  
- ğŸ“˜ Se actualizÃ³ y ampliÃ³ el `README.md` con instrucciones detalladas, endpoints y guÃ­a de despliegue.  

---

### ğŸš€ Resultado final

El proyecto pasÃ³ de un MVP funcional a un **sistema web completo y seguro**, con:
- **AutenticaciÃ³n JWT**,  
- **CRUD de cuatro entidades con relaciones**,  
- **Validaciones y rate limiting**,  
- **Frontend moderno, interactivo y estÃ©ticamente consistente**.

Este conjunto de mejoras cumple con **todos los requisitos del entregable final**, listo para **demo y sustentaciÃ³n profesional**.  


## Como utilizar el programa

Backend (FastAPI)
1. Entrar a la carpeta del backend
```bash
cd backend
```
2. Crear entorno virtual con uv
```bash
uv venv .venv
```
3. Activar entorno virtual
En Windows (PowerShell):
```powershell
.venv\Scripts\Activate.ps1
```
En Linux/Mac:
```bash
source .venv/bin/activate
```
4. Instalar dependencias
```bash
uv pip install -r requirements.txt
```
5. Levantar servidor FastAPI
```bash
uv run uvicorn app.main:app --reload --port 8000
```
ğŸ‘‰ El backend queda disponible en:
- API: http://127.0.0.1:8000
- Swagger Docs: http://127.0.0.1:8000/docs
 Frontend (React + Vite)
1. Entrar a la carpeta del frontend
```bash
cd frontend
```
2. Instalar dependencias
```bash
npm install
```
3. Configurar variables de entorno
Crear el archivo `.env.development` dentro de `frontend/` con el contenido:
```env
VITE_API_URL=http://127.0.0.1:8000
```
4. Levantar servidor de desarrollo
```bash
npm run dev
```
ğŸ‘‰ El frontend queda disponible en:
- http://localhost:5173
ğŸ§ª Flujo de prueba
1. Levantar backend en el puerto 8000.
2. Levantar frontend en el puerto 5173.
3. Abrir http://localhost:5173 en el navegador.
4. Probar:
   - Crear un producto en el formulario.
   - Ver el listado actualizado.
   - Intentar crear un producto duplicado â†’ debe aparecer error 409.

## 7 Estructura del proyecto
```json
project/
â”œâ”€ backend/
â”‚  â”œâ”€ app/
â”‚  â”‚  â”œâ”€ api/routes/products.py
â”‚  â”‚  â”œâ”€ models/product.py
â”‚  â”‚  â”œâ”€ core/config.py
â”‚  â”‚  â””â”€ main.py
â”‚  â”œâ”€ requirements.txt
â”‚  â””â”€ tests/test_products.py
â””â”€ frontend/
   â”œâ”€ src/
   â”‚  â”œâ”€ api.js
   â”‚  â”œâ”€ App.jsx
   â”‚  â””â”€ main.jsx
   â”œâ”€ .env.development
   â”œâ”€ package.json
   â””â”€ vite.config.js

## requirements.txt
fastapi
uvicorn
sqlalchemy
pydantic
pytest
httpx











